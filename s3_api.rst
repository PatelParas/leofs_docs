.. LeoFS documentation master file, created by
   sphinx-quickstart on Tue Feb 21 10:38:17 2012.
   You can adapt this file completely to your liking, but it should at least
   contain the root `toctree` directive.

Amazon S3 API and Interface
---------------------------

Table of S3-API
^^^^^^^^^^^^^^^

Objects-API
"""""""""""

 +----+----------------------------------+--------------------------------------+
 |    | Method                           | Status                               |
 +====+==================================+======================================+
 | 1  | **DELETE Object**                | **Yes**                              |
 +----+----------------------------------+--------------------------------------+
 | 2  | Delete Multiple Objects          | No                                   |
 +----+----------------------------------+--------------------------------------+
 | 3  | **GET Object**                   | **Yes**                              |
 +----+----------------------------------+--------------------------------------+
 | 4  | GET Object ACL                   | Plans to support with 0.14           |
 +----+----------------------------------+--------------------------------------+
 | 5  | GET Object torrent               | No                                   |
 +----+----------------------------------+--------------------------------------+
 | 6  | **HEAD Object**                  | **Yes**                              |
 +----+----------------------------------+--------------------------------------+
 | 7  | **POST Object**                  | **Yes**                              |
 +----+----------------------------------+--------------------------------------+
 | 8  | **PUT Object**                   | **Yes**                              |
 +----+----------------------------------+--------------------------------------+
 | 9  | PUT Object ACL                   | Plans to support with 0.14           |
 +----+----------------------------------+--------------------------------------+
 | 10 | **PUT Object - Copy**            | **Yes**                              |
 +----+----------------------------------+--------------------------------------+
 | 11 | **Initiate Multipart Upload**    | **Yes**                              |
 +----+----------------------------------+--------------------------------------+
 | 12 | **Upload Part**                  | **Yes**                              |
 +----+----------------------------------+--------------------------------------+
 | 13 | **Upload Part - Copy**           | **Yes**                              |
 +----+----------------------------------+--------------------------------------+
 | 14 | **Complete Multipart Upload**    | **Yes**                              |
 +----+----------------------------------+--------------------------------------+
 | 15 | **Abort Multipart Upload**       | **Yes**                              |
 +----+----------------------------------+--------------------------------------+
 | 16 | List Parts                       | No                                   |
 +----+----------------------------------+--------------------------------------+

Buckets-API
"""""""""""

 +----+--------------------------------+--------------------------------------+
 |    | Method                         | Status                               |
 +====+================================+======================================+
 | 1  | **DELETE Bucket**              | **Yes**                              |
 +----+--------------------------------+--------------------------------------+
 | 2  | DELETE Bucket lifecycle        | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 3  | DELETE Bucket policy           | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 4  | DELETE Bucket website          | Plans to support with 0.14           |
 +----+--------------------------------+--------------------------------------+
 | 5  | **GET Bucket (List Objects)**  | **Yes**                              |
 +----+--------------------------------+--------------------------------------+
 | 6  | GET Bucket acl                 | Plans to support with 0.14           |
 +----+--------------------------------+--------------------------------------+
 | 7  | GET Bucket lifecycle           | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 8  | GET Bucket policy              | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 9  | GET Bucket location            | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 10 | GET Bucket logging             | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 11 | GET Bucket notification        | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 12 | GET Bucket Object versions     | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 13 | GET Bucket requestPayment      | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 14 | GET Bucket versioning          | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 15 | GET Bucket website             | Plans to support with 0.14           |
 +----+--------------------------------+--------------------------------------+
 | 16 | **HEAD Bucket**                | **Yes**                              |
 +----+--------------------------------+--------------------------------------+
 | 17 | List Multipart Uploads         | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 18 | **PUT Bucket**                 | **Yes**                              |
 +----+--------------------------------+--------------------------------------+
 | 19 | PUT Bucket acl                 | Plans to support with 0.14           |
 +----+--------------------------------+--------------------------------------+
 | 20 | PUT Bucket lifecycle           | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 21 | PUT Bucket policy              | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 22 | PUT Bucket logging             | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 23 | PUT Bucket notification        | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 24 | PUT Bucket requestPayment      | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 24 | PUT Bucket versioning          | No                                   |
 +----+--------------------------------+--------------------------------------+
 | 25 | PUT Bucket website             | Plans to support with 0.14           |
 +----+--------------------------------+--------------------------------------+


Amazon S3 Infterface
^^^^^^^^^^^^^^^^^^^^

.. index::
   pair: Official Documents; Amazon S3 Infterface

Amazon S3 Official Documents
""""""""""""""""""""""""""""

* `The official documents <http://docs.amazonwebservices.com/AmazonS3/2006-03-01/dev/Welcome.html?r=7602>`_

.. _s3-path-label:

How to determine the name of Bucket
"""""""""""""""""""""""""""""""""""

.. index::
   pair: How to determine the name of Bucket; Installation

*  `Virtual Hosting of Buckets <http://docs.amazonwebservices.com/AmazonS3/2006-03-01/dev/VirtualHosting.html>`_
* Stuffs used for determining
    * S3 have used a **HTTP Host header** or a **Path in HTTP request line**.
    * How S3 determines which stuff depends on **Domain name**.
* Patterns

1. **http://s3.amazonaws.com/bucket/path_to_file**

  In this case, The name of bucket is the first level of path.

  `bucket`

  +--------------+--------------------------------------------------------+
  | Stuff        | Value                                                  |
  +==============+========================================================+
  | request line | GET /bucket/path_to_file HTTP/1.1                      |
  +--------------+--------------------------------------------------------+
  | Host header  | Host: s3.amazonaws.com                                 |
  +--------------+--------------------------------------------------------+

  A argument of LeoFS's :ref:`whereis <whereis>` | :ref:`purge <purge>` command should be `bucket/path_to_file`.

2. **http://www.example.com.s3.amazonaws.com/path_to_file**

  In this case, The name of bucket is a part of subdomain removed `.s3.amazonaws.com`.

  `www.example.com`

  +--------------+--------------------------------------------------------+
  | Stuff        | Value                                                  |
  +==============+========================================================+
  | request line | GET /path_to_file HTTP/1.1                             |
  +--------------+--------------------------------------------------------+
  | Host header  | Host: www.example.com.s3.amazonaws.com                 |
  +--------------+--------------------------------------------------------+

  A argument of LeoFS's :ref:`whereis <whereis>` | :ref:`purge <purge>` command should be `www.example.com/path_to_file`.

3. **http://www.example.com/path_to_file**

  In this case, The name of bucket is equal to FQDN.

    `www.example.com`

  +--------------+--------------------------------------------------------+
  | Stuff        | Value                                                  |
  +==============+========================================================+
  | request line | GET /path_to_file HTTP/1.1                             |
  +--------------+--------------------------------------------------------+
  | Host header  | Host: www.example.com                                  |
  +--------------+--------------------------------------------------------+

  A argument of LeoFS's :ref:`whereis <whereis>` | :ref:`purge <purge>` command should be `www.example.com/path_to_file`.

